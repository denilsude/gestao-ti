{% extends "base.html" %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h2 class="mb-0">Checklist: {{ processo.tipo.title() }}</h2>
        <p class="text-muted mb-0">Colaborador: <strong>{{ processo.funcionario.nome }}</strong></p>
    </div>
    <div class="text-end">
        <span class="badge bg-light text-dark border">Iniciado por: {{ processo.ti_user.username }}</span>
    </div>
</div>

<form method="POST">

  {% if processo.tipo == 'admissao' %}
  <div class="card mb-4 border-primary">
      <div class="card-header bg-primary text-white">
          <h5 class="mb-0">üîê Credenciais Geradas</h5>
      </div>
      <div class="card-body bg-light">
          <div class="row g-3">
              <div class="col-md-4">
                  <label class="fw-bold">Usu√°rio AD</label>
                  <input type="text" class="form-control" name="login_ad" value="{{ processo.funcionario.login_ad }}">
                  <small class="text-muted">Senha Padr√£o: <strong>Sicoob@123</strong></small>
              </div>
              <div class="col-md-4">
                  <label class="fw-bold">E-mail</label>
                  <input type="email" class="form-control" name="email" value="{{ processo.funcionario.email }}">
                  <small class="text-muted">Senha Padr√£o: <strong>Psw@1767</strong></small>
              </div>
              <div class="col-md-4">
                  <label class="fw-bold">Usu√°rio SISBR</label>
                  <input type="text" class="form-control" name="login_sisbr" value="{{ processo.funcionario.login_sisbr }}">
                  <small class="text-muted">PA: <strong>{{ processo.funcionario.num_pa }}</strong></small>
              </div>
          </div>
      </div>
  </div>
  {% endif %}

  <div class="card mb-4">
      <ul class="list-group list-group-flush">
        {% for item in processo.items %}
        <li class="list-group-item d-flex align-items-center p-3">
            <div class="me-3">
                <input class="form-check-input fs-4" type="checkbox" name="check_{{ item.id }}" 
                       id="t_{{ item.id }}" {% if item.status == 'Conclu√≠do' %}checked{% endif %}>
            </div>
            <div class="flex-grow-1">
                <label class="form-check-label fs-6 fw-bold" for="t_{{ item.id }}" style="cursor: pointer;">
                    {{ item.descricao }}
                </label>
                {% if 'TERMO' in item.descricao %}
                    <span class="badge bg-warning text-dark ms-2">Imprimir Termo</span>
                {% endif %}
            </div>
        </li>
        {% endfor %}
      </ul>
  </div>

  <div class="mb-3">
    <label class="form-label">Observa√ß√µes (Se houver pend√™ncias)</label>
    <textarea class="form-control" name="comentario_geral" rows="3">{{ comentario_geral }}</textarea>
  </div>
  
  <div class="d-flex justify-content-between">
      <a href="{{ url_for('checklists.listar_ativos') }}" class="btn btn-secondary">Voltar</a>
      <div>
          {% if processo.tipo == 'admissao' %}
             <a href="{{ url_for('checklists.gerar_termo', funcionario_id=processo.funcionario.id) }}" target="_blank" class="btn btn-dark me-2">üñ®Ô∏è Imprimir Termo</a>
          {% endif %}
          <button type="submit" class="btn btn-primary px-4">Salvar e Concluir</button>
      </div>
  </div>
  
</form>
{% endblock %}